# ğŸ“— ChatGPT ê³ ì •ë°€ OCRÂ·êµ¬ì¡°í™” **Full Guide v2.4 â€“ LDG Ready (LinkedÂ·Agent Mode)**
*(2025â€‘08â€‘10 Â· Asia/Dubai Â· LDG v8.2 ì—°ë™ Â· ë³¸ ë¬¸ì„œëŠ” Mini ì§€ì¹¨ì˜ ë³´ì¡° ìë£Œì…ë‹ˆë‹¤)*

## ëª©ì°¨
- [1) ëª©ì Â·ì ìš© ë²”ìœ„](#1)-ëª©ì ì ìš©-ë²”ìœ„)
- [2) ì›ì¹™(ì¦ê±°Â·ì‹ ë¢°Â·íˆ¬ëª…)](#2)-ì›ì¹™(ì¦ê±°ì‹ ë¢°íˆ¬ëª…))
- [3) KPIÂ·í’ˆì§ˆ ê²Œì´íŠ¸](#3)-kpií’ˆì§ˆ-ê²Œì´íŠ¸)
- [4) íŒŒì´í”„ë¼ì¸ ìƒì„¸(6ë‹¨ê³„)](#4)-íŒŒì´í”„ë¼ì¸-ìƒì„¸(6ë‹¨ê³„))
- [5) ìë™ ê²€ì¦(5ë‹¨ê³„)](#5)-ìë™-ê²€ì¦(5ë‹¨ê³„))
- [6) LDG_PAYLOAD v2.4 ìŠ¤í‚¤ë§ˆ](#6)-ldg_payload-v24-ìŠ¤í‚¤ë§ˆ)
- [7) ComplianceÂ·RegTech ìš´ì˜](#7)-complianceregtech-ìš´ì˜)
- [8) DEM/DET Forecast 2.0](#8)-demdet-forecast-20)
- [9) ë¹„ìš©Â·í™˜ìœ¨ â€” COSTâ€‘GUARD](#9)-ë¹„ìš©í™˜ìœ¨-costguard)
- [10) HSâ€‘RISK](#10)-hsrisk)
- [11) Failâ€‘Safe ZERO](#11)-failsafe-zero)
- [12) ë³´ê³ ì„œ(7+2 ì„¹ì…˜)](#12)-ë³´ê³ ì„œ(72-ì„¹ì…˜))
- [13) ëª…ë ¹ì…‹](#13)-ëª…ë ¹ì…‹)
- [14) ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸](#14)-ìš´ì˜-ì²´í¬ë¦¬ìŠ¤íŠ¸)
- [15) ì¤‘ë‹¨ ë¡œê·¸ í…œí”Œë¦¿](#15)-ì¤‘ë‹¨-ë¡œê·¸-í…œí”Œë¦¿)
- [ë¶€ë¡ A) ìŠ¤í‚¤ë§ˆ ì¢…ë¥˜ ë§µ & í•„ë“œ ì •ì˜(í˜„ì—…í˜•)](#ë¶€ë¡-a)-ìŠ¤í‚¤ë§ˆ-ì¢…ë¥˜-ë§µ-í•„ë“œ-ì •ì˜(í˜„ì—…í˜•))
  - [A-1) LDG ìŠ¤í‚¤ë§ˆ ì „ë°˜(ì—…ë¬´ ìš”ì•½)](#a-1)-ldg-ìŠ¤í‚¤ë§ˆ-ì „ë°˜(ì—…ë¬´-ìš”ì•½))
- [1) í•œëˆˆì—: ìŠ¤í‚¤ë§ˆ ë¶„ë¥˜ ë§µ](#1)-í•œëˆˆì—-ìŠ¤í‚¤ë§ˆ-ë¶„ë¥˜-ë§µ)
  - [1) ì½”ì–´ ì¸ì…Â·ì •ê·œí™”](#1)-ì½”ì–´-ì¸ì…ì •ê·œí™”)
  - [2) ê·œì •Â·ì»´í”Œë¼ì´ì–¸ìŠ¤](#2)-ê·œì •ì»´í”Œë¼ì´ì–¸ìŠ¤)
  - [3) ìš´ì˜Â·ì˜ˆì¸¡](#3)-ìš´ì˜ì˜ˆì¸¡)
  - [4) ë¹„ìš©Â·ë‹¨ê°€(ì°¸ì¡° í…Œì´ë¸” ê³„ì—´)](#4)-ë¹„ìš©ë‹¨ê°€(ì°¸ì¡°-í…Œì´ë¸”-ê³„ì—´))
  - [5) ì¡°ì •Â·êµ­ë‚´ ë ˆí¼ëŸ°ìŠ¤](#5)-ì¡°ì •êµ­ë‚´-ë ˆí¼ëŸ°ìŠ¤)
  - [6) ë ˆì¸Â·ìŠ¹ì¸ì§€ë„](#6)-ë ˆì¸ìŠ¹ì¸ì§€ë„)
  - [7) ê°ì‚¬Â·ì¶œì²˜ ì¶”ì (í”„ë£¨í”„Â·ì˜ìˆ˜ì¦)](#7)-ê°ì‚¬ì¶œì²˜-ì¶”ì (í”„ë£¨í”„ì˜ìˆ˜ì¦))
  - [8) ì½”ìŠ¤íŠ¸ê°€ë“œ íŒì •](#8)-ì½”ìŠ¤íŠ¸ê°€ë“œ-íŒì •)
  - [9) ë¦¬í¬íŠ¸Â·UI ì‘ë‹µ(ëŒ€í™” ì¶œë ¥ ê·œê²©)](#9)-ë¦¬í¬íŠ¸ui-ì‘ë‹µ(ëŒ€í™”-ì¶œë ¥-ê·œê²©))
  - [10) FAIL-SAFE](#10)-fail-safe)
- [1) LDG_PAYLOAD v2.4](#1)-ldg_payload-v24)
- [2) LDG_AUDIT v2.4](#2)-ldg_audit-v24)
- [3) evidence ë ˆì½”ë“œ](#3)-evidence-ë ˆì½”ë“œ)
- [4) CERT_CHK ê²°ê³¼](#4)-cert_chk-ê²°ê³¼)
- [5) HS_RISK](#5)-hs_risk)
- [6) DEMDET_FORECAST v2.0](#6)-demdet_forecast-v20)
- [7) COST_GUARD_RESULT (í‘œ + ìš”ì•½)](#7)-cost_guard_result-(í‘œ-ìš”ì•½))
- [8) container_cargo_rates (ì°¸ì¡° JSON)](#8)-container_cargo_rates-(ì°¸ì¡°-json))
- [9) bulk_cargo_rates (ì°¸ì¡° JSON)](#9)-bulk_cargo_rates-(ì°¸ì¡°-json))
- [10) air_cargo_rates (ì°¸ì¡° JSON)](#10)-air_cargo_rates-(ì°¸ì¡°-json))
- [11) inland_trucking_reference_rates_clean (ì°¸ì¡° JSON)](#11)-inland_trucking_reference_rates_clean-(ì°¸ì¡°-json))
- [12) domestic_reference.json (ë²ˆë“¤)](#12)-domestic_referencejson-(ë²ˆë“¤))
- [13) ref_adjusters.json](#13)-ref_adjustersjson)
- [14) ref_min_fare.json](#14)-ref_min_farejson)
- [15) ApprovedLaneMap_ENHANCED](#15)-approvedlanemap_enhanced)
- [16) Unified Response JSON v1.2 (ëŒ€í™”/ë¦¬í¬íŠ¸ ë˜í¼)](#16)-unified-response-json-v12-(ëŒ€í™”ë¦¬í¬íŠ¸-ë˜í¼))
- [17) ZERO_FAILSAFE_LOG](#17)-zero_failsafe_log)
  - [A-2) Full Guide ë³¸ë¬¸(ë™ê¸°í™”ë³¸)](#a-2)-full-guide-ë³¸ë¬¸(ë™ê¸°í™”ë³¸))
- [1) ëª©ì Â·ì ìš© ë²”ìœ„](#1)-ëª©ì ì ìš©-ë²”ìœ„)
- [2) ì›ì¹™(ì¦ê±°Â·ì‹ ë¢°Â·íˆ¬ëª…)](#2)-ì›ì¹™(ì¦ê±°ì‹ ë¢°íˆ¬ëª…))
- [3) KPIÂ·í’ˆì§ˆ ê²Œì´íŠ¸](#3)-kpií’ˆì§ˆ-ê²Œì´íŠ¸)
- [4) íŒŒì´í”„ë¼ì¸ ìƒì„¸(6ë‹¨ê³„)](#4)-íŒŒì´í”„ë¼ì¸-ìƒì„¸(6ë‹¨ê³„))
- [5) ìë™ ê²€ì¦(5ë‹¨ê³„)](#5)-ìë™-ê²€ì¦(5ë‹¨ê³„))
- [6) LDG_PAYLOAD v2.4 ìŠ¤í‚¤ë§ˆ](#6)-ldg_payload-v24-ìŠ¤í‚¤ë§ˆ)
- [7) ComplianceÂ·RegTech ìš´ì˜](#7)-complianceregtech-ìš´ì˜)
- [8) DEM/DET Forecast 2.0](#8)-demdet-forecast-20)
- [9) ë¹„ìš©Â·í™˜ìœ¨ â€” COST-GUARD](#9)-ë¹„ìš©í™˜ìœ¨-cost-guard)
- [10) HS-RISK](#10)-hs-risk)
- [11) Fail-Safe ZERO](#11)-fail-safe-zero)
- [12) ë³´ê³ ì„œ(7+2 ì„¹ì…˜)](#12)-ë³´ê³ ì„œ(72-ì„¹ì…˜))
- [13) ëª…ë ¹ì…‹](#13)-ëª…ë ¹ì…‹)
- [14) ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸](#14)-ìš´ì˜-ì²´í¬ë¦¬ìŠ¤íŠ¸)
- [15) ì¤‘ë‹¨ ë¡œê·¸ í…œí”Œë¦¿](#15)-ì¤‘ë‹¨-ë¡œê·¸-í…œí”Œë¦¿)

## 1) ëª©ì Â·ì ìš© ë²”ìœ„
- ë³¸ ê°€ì´ë“œëŠ” ì—…ë¡œë“œ ë¬¸ì„œ(CIPL, BL, PL, Invoice, COO, AWB/MAWB ë“±)ë¥¼ **ê³ ì •ë°€ OCRâ†’ì •ê·œí™”â†’ê²€ì¦â†’LDG ì—°ë™**í•˜ëŠ” ì „ ê³¼ì •ì„ í‘œì¤€í™”í•œë‹¤.
- **ë‚´ë¶€ ë„êµ¬(web.run, Python)**ë§Œ ì‚¬ìš©í•˜ë©°, ì™¸ë¶€ APIÂ·ë¹„ì¸ê°€ ì €ì¥ì†Œ ì‚¬ìš©ì„ ê¸ˆì§€í•œë‹¤. PIIëŠ” ë§ˆìŠ¤í‚¹í•˜ê³  ëª¨ë“  ì‚°ì¶œë¬¼ì— í•´ì‹œë¥¼ í¬í•¨í•œë‹¤.

## 2) ì›ì¹™(ì¦ê±°Â·ì‹ ë¢°Â·íˆ¬ëª…)
- **ì¦ê±° ìš°ì„ (HallucinationBan)**: ì •ë¶€Â·í•­ë§ŒÂ·ì„¸ê´€ ê³µì‹œë¥¼ ìµœìš°ì„  ì¸ìš©, ëª¨ë“  ì¸ìš©ì€ `evidence[]`ì— *ì œëª©/ê¸°ê´€/ë°œí–‰ì¼/URL* ì €ì¥.
- **íˆ¬ëª…í•œ ê°€ì •**: ë¶ˆí™•ì‹¤Â·ë¶€ì¡± ë°ì´í„°ëŠ” `ê°€ì •:`ìœ¼ë¡œ ëª…ì‹œ í›„ ì‚¬ëŒ ê²€í†  ê²Œì´íŠ¸.
- **ì¬í˜„ì„±**: ìˆ˜ì¹˜ëŠ” ì†Œìˆ˜ì  2ìë¦¬, í…Œì´ë¸”ì€ CSVë¡œ ì„ë² ë“œ, íŒŒì´í”„ë¼ì¸Â·íŒŒë¼ë¯¸í„°ëŠ” ë¡œê·¸ì— ê¸°ë¡.

## 3) KPIÂ·í’ˆì§ˆ ê²Œì´íŠ¸
- MeanConf â‰¥ 0.92, TableAcc â‰¥ 98.00%, NumericIntegrity = 1.00, EntityMatch â‰¥ 0.98, HashConsistency = PASS, CrossDocConsistency = PASS.
- **Excel ìƒì„± ëª¨ë“œ**: KPI ë¯¸ë‹¬ ì‹œ **Soft Warning** (ìƒì„± ì°¨ë‹¨ ì—†ìŒ, ê²½ê³ ë§Œ ê¸°ë¡, Human Gate ê¶Œì¥)
- **OCR íŒŒì´í”„ë¼ì¸ ëª¨ë“œ**: ë¯¸ë‹¬ ì‹œ **ZERO** ì „í™˜ (ingest ì°¨ë‹¨, ì¤‘ë‹¨ ë¡œê·¸ ì¶œë ¥, êµì • ë£¨í‹´(`/ocr_lowres_fix`, `/ocr_retry`, `/ocr_align`) ì œì•ˆ)

## 4) íŒŒì´í”„ë¼ì¸ ìƒì„¸(6ë‹¨ê³„)
1. **Preâ€‘Prep**: ì˜¤í†  íšŒì „Â·ë°ìŠ¤í, ì½˜íŠ¸ë¼ìŠ¤íŠ¸/ìƒ¤í”„ë‹, ë…¸ì´ì¦ˆ ì–µì œ, DPI ë³´ì •(ê¶Œì¥ â‰¥300dpi).
2. **Vision OCR**: ë ˆì´ì•„ì›ƒ ë¸”ë¡Â·ë¼ì¸ ì¸ì‹, ì–¸ì–´ ê°ì§€, confidence ìˆ˜ì§‘, í˜ì´ì§€ë³„ ë©”íŠ¸ë¦­ ì¶”ì .
3. **Smart Table Parser 2.1**: ë³‘í•©ì…€ í•´ì œ, ë‹¤ì¤‘ í—¤ë” ì •ê·œí™”, ë‹¨ìœ„/í†µí™” ë¶„ë¦¬, ì„¸ë¡œâ†’ê°€ë¡œ í”¼ë²—, ë¼ì¸ì•„ì´í…œ ë³µì›.
4. **NLP Refine**: ë‹¨ìœ„ ê·œê²©í™”(kg, mÂ³, EA), ìˆ˜ëŸ‰Â·ë‹¨ê°€Â·í•©ê³„ ì¼ê´€ì„± ê²€ì‚¬, NULL/??/ì¶”ì • í‘œê¸°.
5. **Field Tagger**: Shipper/Consignee/BL_No/Invoice_No/Incoterms/Origin/HS/UN_No/IMDG ë“±ì„ í‚¤â€‘ê°’ìœ¼ë¡œ íƒœê¹….
6. **Payload Builder**: LDG_PAYLOAD v2.4 ì§ë ¬í™” + `doc_hash`Â·`pages`Â·ì‹œê°„Â·êµì°¨ ë§í¬ + CSV í…Œì´ë¸” ì„ë² ë“œ.

## 5) ìë™ ê²€ì¦(5ë‹¨ê³„)
A. 1ì°¨: KPI/ìŠ¤í‚¤ë§ˆ/íƒ€ì…Â·í•„ìˆ˜ í•„ë“œ/NullÂ·í•©ê³„ ë“± ê¸°ë³¸ ë¬´ê²°ì„±.  
B. í‘œí˜„ ë¡œì§: ì†Œê³„â†”ì´ê³„, í†µí™”Â·í™˜ìœ¨, ë°˜ì˜¬ë¦¼, ìŒìˆ˜/0 ê°’ ì²˜ë¦¬, ë‹¨ìœ„ ë¶ˆì¼ì¹˜ íƒì§€.  
C. êµì°¨ ê²€ì¦: OCR Rawâ†”Refined, CIPLâ†”BLâ†”PL í‚¤í•„ë“œ ë§¤í•‘ ë° Î” ê³„ì‚°(í—ˆìš©: Qty Â±1, Wt Â±15.00kg, CBM Â±0.02mÂ³).  
D. ì í•©ë„ ì‚°ì¶œ: í•­ëª© ê°€ì¤‘(í…Œì´ë¸” ì¼ì¹˜Â·í‚¤í•„ë“œÂ·ìˆ˜ì¹˜Â·ê·œì • ê·¼ê±°)ë¡œ 0â€“100%.  
E. ìµœì¢… ë³´ê³ : LDG_PAYLOAD + LDG_AUDIT(Warnings, CrossDocCheck, ZERO_Failsafe, HashConsistency).

## 6) LDG_PAYLOAD v2.4 ìŠ¤í‚¤ë§ˆ
```json
{
  "meta": {
    "source_file": "â€¦",
    "doc_hash": "sha256:â€¦",
    "ocr_version": "v2.4",
    "mean_conf": 0.94,
    "table_acc": 0.99,
    "numeric_integrity": true,
    "pages": 7,
    "created_at": "2025-08-10T12:34:56+04:00"
  },
  "data": {
    "DocType": "B/L + CIPL",
    "BL_No": "â€¦",
    "Invoice_No": "â€¦",
    "Shipper": "â€¦",
    "Consignee": "â€¦",
    "Incoterms": "FOB",
    "Currency": "USD",
    "Packages": 14,
    "Gross_Weight_kg": 18250.00,
    "Net_Weight_kg": 17780.00,
    "CBM": 38.40,
    "HS_Candidate": ["85044090","85049010","85049090"],
    "Origin": "KR",
    "port_profile": {"discharge":"Khalifa","free_time":{"dem":5,"det":10}},
    "eta": {"value":"2025-08-18","source":"carrier notice","confidence":0.80},
    "demdet_profile": {"rule_id":"khalifa:5/10","valid_until":"2025-12-31"},
    "tables": [{"table_id":"bl_items","format":"csv","data":"Header1,Header2\nVal1,Val2"}]
  },
  "evidence": [
    {"type":"regulation","title":"Customs Notice â€¦","url":"https://â€¦","published":"2025-07-28"}
  ],
  "warnings": ["Page 3 ì„¤ëª… ëˆ„ë½ â†’ ?? í‘œì‹œ"]
}
```

## 7) ComplianceÂ·RegTech ìš´ì˜
- **Miniâ€‘RAG(24h)**: ì •ë¶€Â·ì„¸ê´€Â·í•­ë§Œ ê³µì‹œë¥¼ ì£¼ê¸°ì  ê°±ì‹ . `/rag view [kw]`ë¡œ ìºì‹œ ì ê²€, í•„ìš” ì‹œ `/system flush cache minirag`.
- **CERTâ€‘CHK**: HS/í‚¤ì›Œë“œ ê¸°ë°˜ìœ¼ë¡œ FANR/MOIAT/TRA/MOFAIC ìš”êµ¬ ê°€ëŠ¥ì„± ì¶”ì •(ê²°ì • ì•„ë‹˜). ì¸ìš©ì€ `evidence[]` ê¸°ë¡.
- **IMDG/UN**: ìœ„í—˜ë¬¼ í‚¤ì›Œë“œ ê°ì§€ ì‹œ í´ë˜ìŠ¤/UN_No í›„ë³´ë¥¼ íƒœê¹…í•˜ê³ , í™•ì¸ ë¶ˆê°€ ì‹œ `null`ê³¼ ì¡°ì¹˜ ì œì•ˆ.

## 8) DEM/DET Forecast 2.0
- **ì…ë ¥**: ETA ê°’Â·ì†ŒìŠ¤Â·ì‹ ë¢°ë„, Port Profile(Free Time), ê³µíœ´ì¼/ì£¼ë§, í˜¼ì¡ ê°€ì¤‘ì¹˜(ê°€ì • ë˜ëŠ” ì¶œì²˜).  
- **ì¶œë ¥**: dem/det ë§Œë£Œì¼Â·ì”ì—¬ì¼Â·ìœ„í—˜ë„Â·ë¹„ìš©ë°œìƒ ì˜ˆìƒÂ·Gate Out ì¼ì.  
- **ëª…ë ¹**: `/demdet set profile {port}:{dem}d/{det}d [valid:YYYY MM DD]`, `/demdet set eta {cntr#} {YYYY MM DD} [source:"â€¦"]`.

## 9) ë¹„ìš©Â·í™˜ìœ¨ â€” COSTâ€‘GUARD
- ê¸°ì¤€ë‹¨ê°€ ëŒ€ë¹„ ì´ˆê³¼ìœ¨ë¡œ ìœ„í—˜ ë“±ê¸‰. ì›í™”í ë³´ì¡´, í™˜ìœ¨ì€ ë¬¸ì„œ ê¸°ì¤€ ì—†ìœ¼ë©´ `fx_source:"none"`, ìˆ˜ë™ ì…ë ¥ ì‹œ `fx_source:"manual"`ê³¼ ë¡œê·¸.
- ì¶œë ¥: PASS/FAIL, ì´ˆê³¼ í•­ëª© í‘œ, ìš”ì•½ í†µê³„, ê·¼ê±° ë§í¬.

## 10) HSâ€‘RISK
- HS í›„ë³´ ìµœëŒ€ 3ê°œ + confidence. ë‹¤ì˜ì„±Â·ë©´ì œ/í—ˆê°€ ê°€ëŠ¥ì„±ì„ íƒœê·¸í•˜ê³  ê·œì • ê·¼ê±° ìˆ˜ì§‘ ìš”ì²­.
- ê²°ë¡  ì „ ë°˜ë“œì‹œ ì‚¬ëŒ ê²€í† . ë¶„ìŸ ì‹œ ê·œì • ìƒìœ„ ê·¼ê±°(ì •ë¶€ ê³µì‹œ) ìš°ì„ .

## 11) Failâ€‘Safe ZERO

### Excel ìƒì„± ëª¨ë“œ (Soft Warning)
- ZEROëŠ” **Soft Warning**ìœ¼ë¡œ ì²˜ë¦¬ (Excel ìƒì„± ì°¨ë‹¨ ì—†ìŒ)
- LDG_AUDIT.zero_flagsì— ê¸°ë¡í•˜ë˜ ìµœì„  ë…¸ë ¥ìœ¼ë¡œ ì¶œë ¥
- Fallback ì „ëµ:
  - í…œí”Œë¦¿ ë¡œë“œ ì‹¤íŒ¨ â†’ ê¸°ë³¸ í…œí”Œë¦¿ ì‚¬ìš©
  - ì…ë ¥ íŒŒì¼ íŒŒì† â†’ ë¶€ë¶„ ë°ì´í„° ì¶”ì¶œ, ëˆ„ë½ í•„ë“œëŠ” NULL
  - Excel ì €ì¥ ì‹¤íŒ¨ â†’ JSON ì¶œë ¥ + ì—ëŸ¬ ë©”ì‹œì§€

### OCR íŒŒì´í”„ë¼ì¸ ëª¨ë“œ (Hard Block)
- íŠ¸ë¦¬ê±°: KPI ë¯¸ë‹¬, í•µì‹¬ ì‹ë³„ì ê²°ì†, Hash ì‹¤íŒ¨, ê·œì • ê·¼ê±° ë¶€ì¬/ìƒì¶©
- **ì¤‘ë‹¨ ë¡œê·¸**ì—ëŠ” ì‚¬ìœ Â·ìˆ˜ì¹˜Â·ê·¼ê±°Â·ê¶Œê³  ì¡°ì¹˜(`/ocr_lowres_fix`, ì¬ìŠ¤ìº”, ì •ì •ë³¸ ìš”ì²­, ìºì‹œ ì´ˆê¸°í™”)ë¥¼ í¬í•¨

## 12) ë³´ê³ ì„œ(7+2 ì„¹ì…˜)
1) Auto Guard Summary  1.5) Risk Assessment(ë™ì¸Â·ì‹ ë¢°ë„)  
2) Discrepancy Table(Î”Â·í—ˆìš©ì˜¤ì°¨Â·ìƒíƒœ)  3) Compliance Matrix(ìƒíƒœ/ê·¼ê±°/ì¡°ì¹˜)  
4) Autoâ€‘Fill: Freight & Insurance  5) Auto Action Hooks  
6) DEM/DET & Gate Out Forecast  7) Evidence & Citations  
8) Weak Spot & Improvements  9) Changelog

## 13) ëª…ë ¹ì…‹
- `/ocr_basic {file} [mode:LDG|LDG+]`, `/ocr_table {file} [--colfix --unitnorm --as=csv]`, `/ocr_techdoc {file}`  
- `/ocr_retry {file}`, `/ocr_lowres_fix {file}`, `/ocr_align {cipl} {bl} [pl]`, `/ocr_compare {A} {B} [--tol=0.02]`  
- `/ocr_hs_seed {file} [--origin=AE --max=3]`, `/ocr_certchk {payload.json} [--moiat --fanr --imdg]`, `/ocr_costguard {file} {cost_table.csv} [--lock-fx]`  
- `/workflow scan email {file} {to}`, `/workflow full_checkup {file} [to]`

## 14) ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
- OCR KPI ìˆ˜ì¹˜(2ìë¦¬) ê¸°ë¡, Î” ê³„ì‚°Â·ìƒíƒœ ì´ëª¨ì§€, evidence ìˆ˜ì§‘, DEM/DET í”„ë¡œí•„Â·ETA ì†ŒìŠ¤/ì‹ ë¢°ë„, COSTâ€‘GUARDÂ·HSâ€‘RISK ê²°ê³¼, ZERO ë¡œê·¸.

## 15) ì¤‘ë‹¨ ë¡œê·¸ í…œí”Œë¦¿
```text
[ì¤‘ë‹¨|ZERO] LDG v8.2
ì‚¬ìœ : TableAcc 96.40% + CIPLâ†”BL íŒ¨í‚¤ì§€ Î” +3
ì¡°ì¹˜: ì¬ìŠ¤ìº”(â‰¥300dpi), ì •ì •ë³¸ ì—…ë¡œë“œ, /system flush cache all í›„ ì¬ë¶„ì„
ê·¼ê±°: evidence[0] ë°œí–‰ì¼ ê²½ê³¼(2023-â€¦)
```

---

## ë¶€ë¡ A) ìŠ¤í‚¤ë§ˆ ì¢…ë¥˜ ë§µ & í•„ë“œ ì •ì˜(í˜„ì—…í˜•)
> í†µí•© ê·¼ê±°(ì—…ë¡œë“œ íŒŒì¼): `LDG.MD`, `7257fb4b-64b5-4c27-b401-dfa7523e8403.md`  
> ë³‘í•©ì‹œê°(Asia/Dubai): 2025-11-03T19:53:07+04:00

### A-1) LDG ìŠ¤í‚¤ë§ˆ ì „ë°˜(ì—…ë¬´ ìš”ì•½)
ì•„ë˜ëŠ” **LDG v8.2 Ã— OCR v2.4 ì›Œí¬í”Œë¡œ**ì—ì„œ ì‹¤ì œë¡œ ì“°ëŠ” **ìŠ¤í‚¤ë§ˆ ì¢…ë¥˜(ì „ì²´)**ë¥¼ ìš©ë„ë³„ë¡œ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤. (í•µì‹¬ í•­ëª©ê³¼ ê·¼ê±° ë¼ì¸ í•¨ê»˜ í‘œê¸°)

---

# 1) ì§ë ¬í™”(Serialization) ìŠ¤í‚¤ë§ˆ

* **LDG_PAYLOAD v2.4**

  * Top-level: `meta`, `data`, `evidence`, `warnings`. `meta`ì— `doc_hash/ocr_version/pages/created_at` ë“±, ìˆ˜ì¹˜ KPI(`mean_conf`, `table_acc`, `numeric_integrity`) í¬í•¨.
  * `data` ìš”ì•½: `DocType/Identifiers(BL_No, Invoice_No)/Parties(Shipper, Consignee)/Trade(Incoterms, Currency)/Logistics(Packages, Weights, CBM)/HS_Candidate/RegTechFlags/Financials(Total_Amount)/Linked Ops(port_profile, eta, demdet_profile)/Tables(csv ì„ë² ë“œ)` .
  * `evidence[]` í‘œì¤€ í•„ë“œ(ê¸°ê´€Â·ë°œí–‰ì¼Â·URL ë“±) ë° ìš°ì„ ìˆœìœ„.

* **LDG_AUDIT (í‘œì¤€ ê°ì‚¬ ê²°ê³¼ JSON)**

  * í•„ë“œ: `SelfCheck{critic_mode, fx_source, fx_locked}`, `TotalsCheck{sum_lines, doc_total, delta}`, `CrossDocCheck[]`, `HashConsistency`, `ZERO_Failsafe`, `Warnings[]` (í•©ê³„ ì˜¤ì°¨=0.00 ì›ì¹™).

---

# 2) ë„ë©”ì¸ ì˜¨í†¨ë¡œì§€(RDF/OWL/JSON-LD) ìŠ¤í‚¤ë§ˆ

* **í•µì‹¬ í´ë˜ìŠ¤(ìš”ì•½)**:
  `ldg:Document, ldg:Page, ldg:Image, ldg:OCRBlock/OCRToken, ldg:Table, ldg:RefinedText, ldg:EntityTag, ldg:Payload, ldg:Validation, ldg:Metric, ldg:Audit, ldg:CrossLink, ldg:RegTechFlag, ldg:HSCandidate, ldg:CostGuardCheck`(rate ê²€ì¦).

  * ì²˜ë¦¬ë‹¨ê³„ì™€ì˜ ì—°ê²°(ì…ë ¥â†’OCRâ†’ì •ì œâ†’ê²€ì¦â†’CostGuardâ†’RegTech).

* **ì£¼ìš” ê°ì²´Â·ê´€ê³„(OWL ObjectProperty) ìŠ¤í‚¤ë§ˆ**:
  `ldg:hasPage/hasImage/partOf/contains/extractedFrom/parsedFrom/refines/tags/buildsFrom/validates/measures/audits/links/triggeredBy/proposedBy` ë“± íŒŒì´í”„ë¼ì¸ ì „ë‹¨ê³„ ì—°ê²° ì •ì˜.

* **ì£¼ìš” ì†ì„±(OWL DatatypeProperty) ìŠ¤í‚¤ë§ˆ**:
  `ldg:hasPageNumber/hasImageRef/hasImageHash/hasResolution/hasText/hasPosition/hasSchema/hasType â€¦` ë“± ë ˆì´ì•„ì›ƒÂ·OCR ì¢Œí‘œÂ·ìŠ¤í‚¤ë§ˆëª… ë³´ìœ .

* **JSON-LD ì˜ˆì‹œ ìŠ¤í‚¤ë§ˆ(ì»¨í…ìŠ¤íŠ¸Â·íƒ€ì…Â·ì†ì„± ë§¤í•‘)**:

  * Document Guardian ì˜ˆì‹œ(ë¬¸ì„œâ†’ì—”í‹°í‹° íƒ€ì…Â·ê°’Â·ì‹ ë¢°ë„ ë§¤í•‘).
  * OCR Pipeline ì˜ˆì‹œ(Document/Page/Image/OCRBlockâ†’Payload/Validation/Metric ì—°ê²°).

* **Flow Code ê´€ë ¨ ì¶”ì¶œÂ·ê²€ì¦ ìŠ¤í‚¤ë§ˆ(í‘œ/ê·œì¹™Â·RDF ì†ì„±)**:
  ë¬¸ì„œìœ í˜•ë³„ ì¶”ì¶œí•„ë“œ í‘œ/ê²€ì¦ ê·œì¹™ + `ldg:extractedFlowCode`, `ldg:flowCodeConfidence` ë“±.

---

# 3) OFCO ì¸ë³´ì´ìŠ¤ ê³„ì—´ ìŠ¤í‚¤ë§ˆ

* **OFCO ì¸ë³´ì´ìŠ¤ ì‹œíŠ¸ JSON Schema (2024-09~2025-03 ë°°ì¹˜)**
  Top-level: `type:"object"`, `required:["invoice_no","invoice_date","currency","lines"]`, `properties{invoice_no, invoice_date, supplier, buyer, currency, vat_rate_pct, total_excl_tax, total_tax, total_incl_tax, linesâ€¦}` ì •ì˜.

* **OFCO ì •ê·œí™” ë¼ì¸(Line) ìŠ¤í‚¤ë§ˆ(í‘œì¤€ ì»¬ëŸ¼)**
  ì—´ ì •ì˜: `invoice_no, line_no, tariff_id, description, unit1~unit3, rate, amount_excl_tax, tax_rate_pct, tax_amount, total_incl_tax, calc_check, evidence`(CSV/í…Œì´ë¸”ë¡œ ê³ ì •).

* **OFCO ë§¤í•‘Â·ê²€ì¦ ë¡œì§(ìŠ¤í‚¤ë§ˆ ì ìš© ìœ„ì¹˜)**
  ëŒ€ìƒ ì‹œíŠ¸/ì…ë ¥ì—´(ì˜ˆ: `BJ=Total`, `BB:BI=EA/Rate`, `K:BA=ì½”ë“œ/ì„¤ëª…/VAT/í†µí™”`), KPI ë° ZERO ê·œì¹™.

---

# 4) ìš´ì˜Â·ì˜ˆì¸¡ ë¶€ê°€ ìŠ¤í‚¤ë§ˆ

* **DEM/DET Forecast 2.0 ì…ë ¥/ë§í¬ í•„ë“œ**:
  `eta{value, source, confidence}`, `port_profile.free_time{dem, det}` ë° LDG payload ë‚´ Linked Opsë¡œ ì§ë ¬í™”.

* **COST-GUARD íŒë‹¨ ìŠ¤í‚¤ë§ˆ(ìš”ìœ¨ ê°ì‚¬ ë‹¨ìœ„)**:
  ì˜¨í†¨ë¡œì§€ ì—”í‹°í‹° `ldg:CostGuardCheck{standardRate, draftRate, exceedPct, verdict}`.

---

# 5) íŒŒì´í”„ë¼ì¸Â·í’ˆì§ˆ ê²Œì´íŠ¸ ìŠ¤í‚¤ë§ˆ(ì°¸ì¡°)

* **KPI ê²Œì´íŠ¸ & ZERO Fail-safe íŠ¸ë¦¬ê±° ì •ì˜**:
  MeanConfâ‰¥0.92, TableAccâ‰¥0.98, NumericIntegrity=1.00, CrossDoc ì¼ì¹˜ìœ¨ ê¸°ì¤€ ë“±(ê°ì‚¬Â·ë¦¬í¬íŠ¸ ì—°ë™).

---

## 1) í•œëˆˆì—: ìŠ¤í‚¤ë§ˆ ë¶„ë¥˜ ë§µ

* ì§ë ¬í™”: **LDG_PAYLOAD v2.4 / LDG_AUDIT**
* ì˜¨í†¨ë¡œì§€: **í´ë˜ìŠ¤Â·ê´€ê³„(OWL)** + **JSON-LD ì»¨í…ìŠ¤íŠ¸** + **Flow Code ê·œì¹™Â·ì†ì„±**
* OFCO ì „ìš©: **ì¸ë³´ì´ìŠ¤ ì‹œíŠ¸ JSON Schema**, **ì •ê·œí™” ë¼ì¸(Columns) ìŠ¤í‚¤ë§ˆ**, **ë§¤í•‘Â·ê²€ì¦ ë¡œì§ ìŠ¤í‚¤ë§ˆ**
* ìš´ì˜ í™•ì¥: **DEM/DET ì…ë ¥ ìŠ¤í‚¤ë§ˆ**, **COST-GUARD íŒë‹¨ ìŠ¤í‚¤ë§ˆ**

í•„ìš”í•˜ì‹œë©´ ìœ„ í•­ëª©ë³„ **í•„ë“œ ì „ì²´ ëª©ë¡(ë¨¸ë¦¬ê¸€ ì‚¬ì „)**ë„ CSVë¡œ ë½‘ì•„ë“œë¦¬ê² ìŠµë‹ˆë‹¤.


ë‹¤ìŒì€ **LDG v2.4 íŒŒì´í”„ë¼ì¸ ê¸°ì¤€ â€œì „ì²´ ìŠ¤í‚¤ë§ˆ ì¢…ë¥˜â€ ì¼ëŒ(ìš”ì•½)**ì…ë‹ˆë‹¤. ì´ë¦„ì€ ì½”ë“œì— ì“°ëŠ” í‘œì¤€ í‚¤ë¥¼ ë³‘ê¸°í–ˆìŠµë‹ˆë‹¤.

### 1) ì½”ì–´ ì¸ì…Â·ì •ê·œí™”

* **LDG_PAYLOAD v2.4** (`meta`, `data`, `evidence`, `warnings`) â€“ ë¬¸ì„œë³„ í‘œì¤€ JSON í˜ì´ë¡œë“œ.
* **LDG_AUDIT v2.4** (`warnings`, `cross_doc`, `kpi`, `zero_flags`) â€“ ê²€ì¦Â·ë¦¬ìŠ¤í¬ ë¡œê·¸ JSON.
* **evidence[] ë ˆì½”ë“œ** (`type`, `title`, `url`, `published`) â€“ ê·œì •/ê·¼ê±° ì¸ìš© ê°ì²´.

### 2) ê·œì •Â·ì»´í”Œë¼ì´ì–¸ìŠ¤

* **CERT_CHK ê²°ê³¼** (`hs_candidates`, `moiat`, `fanr`, `imdg`, `notes`) â€“ ê·œì œ ê°€ì„¤ íƒœê¹… JSON.
* **HS_RISK** (`codes[â‰¤3]`, `confidence`, `reasoning`) â€“ HS í›„ë³´Â·ì‹ ë¢°ë„ JSON.

### 3) ìš´ì˜Â·ì˜ˆì¸¡

* **DEMDET_FORECAST v2.0** (`eta`, `port_profile`, `free_time`, `expiry`, `risk_level`, `cost_hint`) â€“ DEM/DET ë§Œë£ŒÂ·ë¹„ìš© ì˜ˆì¸¡ JSON.

### 4) ë¹„ìš©Â·ë‹¨ê°€(ì°¸ì¡° í…Œì´ë¸” ê³„ì—´)

* **container_cargo_rates** (`dataset`, `currency_policy`, `validation_rules`, `records[]` â€¦ ê° ë ˆì½”ë“œ: `no`,`cargo_type`,`port`,`destination`,`detail_cargo_type`,`container_type`,`description`,`unit`,`remark`,`rate{amount,currency,unit,tolerance}`, ë©”íƒ€ `_line_no`,`_sheet`)
* **bulk_cargo_rates** (êµ¬ì¡° ìœ ì‚¬, ë²Œí¬ ì „ìš© í•„ë“œ í¬í•¨: `min_metric_ton`,`max_metric_ton`,`length(meter)` ë“± + `rate{â€¦}`/`rates(usd)` í˜¼ì¬)
* **inland_trucking_reference_rates_clean** (`dataset`,`currency_policy`,`validation_rules`,`records[]` â€¦ `category`,`port`,`destination`,`unit`,`charge_description`,`rate{amount,currency,tolerance}`, `flag`)
* **air_cargo_rates** (í•­ê³µ ì „ìš© ì°¸ì¡° JSON; í•„ë“œ êµ¬ì„±ì€ ìœ„ì™€ ë™ì¼ ê³„ì—´)

### 5) ì¡°ì •Â·êµ­ë‚´ ë ˆí¼ëŸ°ìŠ¤

* **ref_min_fare** (`mode="flat|min_step|min_total"`, `value`, `currency`, `fx`) â€“ ìµœì†Œìš”ê¸ˆ ê·œì¹™ JSON.
* **ref_adjusters** (`scope`(e.g., `"container|bulk|inland"`), `key`, `apply`, `rule`) â€“ ê°€ì‚°/ê°ì‚° ì¡°ì • ê·œì¹™ JSON.
* **domestic_reference** (í—¤ë”: `dataset`, `generated_at`, `notes`, `records` í”„ë ˆì„) â€“ êµ­ë‚´ ìš”ìœ¨/ì¡°ê±´ ë²ˆë“¤ JSON.

### 6) ë ˆì¸Â·ìŠ¹ì¸ì§€ë„

* **ApprovedLaneMap_ENHANCED** (`lanes[]`: `origin`,`destination`,`mode`,`vendor`,`cost_center`,`risk_tag` â€¦) â€“ ìŠ¹ì¸ O/D ë ˆì¸ ë§µ JSON.

### 7) ê°ì‚¬Â·ì¶œì²˜ ì¶”ì (í”„ë£¨í”„Â·ì˜ìˆ˜ì¦)

* **proof.artifact** (ì˜ˆ: `id`,`hash`,`createdAt`,`source`,`signature`) â€“ ì‚°ì¶œë¬¼ ë¬´ê²°ì„± ì¦ë¹™ JSON.
* **recap.card / recap.provenance** â€“ ìš”ì•½Â·ê·¼ê±° ì¹´ë“œ(í…ìŠ¤íŠ¸/êµ¬ì¡° í˜¼í•©)

### 8) ì½”ìŠ¤íŠ¸ê°€ë“œ íŒì •

* **COST_GUARD_RESULT**

  * **í‘œ(í•„ìˆ˜)**: `item`, `draft_rate`, `std_rate`, `delta_pct`, `risk_tier`, `remarks`, `pass_fail`
  * **ìš”ì•½**: í‰ê· /ì¤‘ì•™/ìµœëŒ€ ì´ˆê³¼ìœ¨, í™˜ìœ¨ ì ê¸ˆ ì •ë³´(`fx_locked`)
  * **ê·¼ê±°**: ì°¸ì¡° í…Œì´ë¸” íŒŒì¼/ë¼ì¸ (`_sheet`,`_line_no`) ë°±ë§í¬ í¬í•¨ ê¶Œì¥. â†’ ì°¸ì¡°í…Œì´ë¸” ì˜ˆì‹œëŠ” ìœ„ â€œ4) ë¹„ìš©Â·ë‹¨ê°€â€ ì¸ìš©.

### 9) ë¦¬í¬íŠ¸Â·UI ì‘ë‹µ(ëŒ€í™” ì¶œë ¥ ê·œê²©)

* **Unified Response JSON v1.2** (`exec_summary`,`visuals`,`options`,`roadmap`,`automation`,`qa`,`cmdrec`,`meta{version,tz}`) â€“ ë³´ê³ Â·UI ì¶œë ¥ìš© ìƒìœ„ ë˜í¼.

### 10) FAIL-SAFE

* **ZERO_FAILSAFE_LOG** (`reason`,`risk`,`requested_data`,`next_action`,`metrics_at_fail`) â€“ ì¤‘ë‹¨ ì‚¬ìœ  ë° ì¬ê°œ ì¡°ê±´ í…œí”Œë¦¿.

---

í•„ìš”í•˜ì‹œë©´ **ê° ìŠ¤í‚¤ë§ˆì˜ í•„ë“œ ì •ì˜í‘œ(ì»¬ëŸ¼ë³„ íƒ€ì…Â·ì„¤ëª…)**ë¥¼ ë°”ë¡œ ë¶™ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ì¢‹ì•„. ì•„ë˜ì— **ìš”ì²­í•œ ìŠ¤í‚¤ë§ˆë³„ í•„ë“œ ì •ì˜í‘œ(í•„ë“œÂ·íƒ€ì…Â·í•„ìˆ˜Â·ì„¤ëª…Â·ì˜ˆì‹œ)**ë¥¼ í•œ ë²ˆì— ì •ë¦¬í–ˆì–´. ìˆ«ìëŠ” 2ìë¦¬ ê³ ì •, ë‚ ì§œëŠ” ISO(YYYY-MM-DD).

---

## 1) LDG_PAYLOAD v2.4

| Field                  | Type          | Req | ì„¤ëª…              | ì˜ˆì‹œ                                                                                |
| ---------------------- | ------------- | --- | --------------- | --------------------------------------------------------------------------------- |
| meta.source_file       | string        | Y   | ì›ë³¸ íŒŒì¼ ê²½ë¡œ/ì´ë¦„     | `OFCO-INV-0001178.pdf`                                                            |
| meta.doc_hash          | string        | Y   | SHA-256 ë“± ë¬¸ì„œ í•´ì‹œ | `sha256:â€¦`                                                                        |
| meta.ocr_version       | string        | Y   | OCR/íŒŒì„œ ë²„ì „       | `v2.4`                                                                            |
| meta.mean_conf         | number        | Y   | OCR í‰ê·  ì‹ ë¢°ë„(0â€“1) | 0.94                                                                              |
| meta.table_acc         | number        | Y   | í…Œì´ë¸” ì •í•©ë„         | 0.99                                                                              |
| meta.numeric_integrity | boolean       | Y   | ìˆ«ì ë¬´ê²°ì„± í†µê³¼ ì—¬ë¶€    | true                                                                              |
| meta.pages             | integer       | Y   | ì´ í˜ì´ì§€ ìˆ˜         | 7                                                                                 |
| meta.created_at        | datetime      | Y   | ìƒì„±ì‹œê°(+TZ)       | `2025-08-10T12:34:56+04:00`                                                       |
| data.DocType           | string        | Y   | ë¬¸ì„œ ìœ í˜•           | `Invoice`,`B/L`,`CIPL`                                                            |
| data.BL_No             | string        | N   | BL ë²ˆí˜¸           | `HMMBUSA123456`                                                                   |
| data.Invoice_No        | string        | N   | ì¸ë³´ì´ìŠ¤ ë²ˆí˜¸         | `INV-12345`                                                                       |
| data.Shipper           | string        | N   | ì†¡í•˜ì¸             | `SAMSUNG C&T`                                                                     |
| data.Consignee         | string        | N   | ìˆ˜í•˜ì¸             | `ADNOC`                                                                           |
| data.Incoterms         | string        | N   | ì¸ì½”í…€ì¦ˆ            | `FOB`                                                                             |
| data.Currency          | string        | N   | í†µí™”              | `USD`                                                                             |
| data.Packages          | integer       | N   | íŒ¨í‚¤ì§€ ìˆ˜           | 14                                                                                |
| data.Gross_Weight_kg   | number        | N   | ì´ì¤‘ëŸ‰(kg)         | 18250.00                                                                          |
| data.Net_Weight_kg     | number        | N   | ìˆœì¤‘ëŸ‰(kg)         | 17780.00                                                                          |
| data.CBM               | number        | N   | ì²´ì (mÂ³)          | 38.40                                                                             |
| data.HS_Candidate      | array[string] | N   | HS ì½”ë“œ í›„ë³´(â‰¤3)    | `["85044090","85049010"]`                                                         |
| data.Origin            | string        | N   | ì›ì‚°ì§€ ISO2        | `KR`                                                                              |
| data.port_profile      | object        | N   | í¬íŠ¸Â·Free time ë“±  | `{discharge:"Khalifa", free_time:{dem:5, det:10}}`                                |
| data.eta               | object        | N   | ETA ê°’/ì¶œì²˜/ì‹ ë¢°ë„    | `{value:"2025-08-18", source:"carrier", confidence:0.80}`                         |
| data.demdet_profile    | object        | N   | DEM/DET ê·œì¹™      | `{rule_id:"khalifa:5/10", valid_until:"2025-12-31"}`                              |
| data.tables[]          | array[obj]    | N   | CSV ì„ë² ë“œ í…Œì´ë¸”     | `{table_id:"items", format:"csv", data:"H1,H2\nV1,V2"}`                           |
| evidence[]             | array[obj]    | N   | ê·œì •/ê·¼ê±° ì¸ìš©        | `{type:"regulation", title:"Customs â€¦", url:"https://â€¦", published:"2025-07-28"}` |
| warnings[]             | array[string] | N   | ê²½ê³  ë©”ì‹œì§€          | `"Pg3 ì„¤ëª… ëˆ„ë½"`                                                                     |

---

## 2) LDG_AUDIT v2.4

| Field                | Type          | Req | ì„¤ëª…            | ì˜ˆì‹œ                            |
| -------------------- | ------------- | --- | ------------- | ----------------------------- |
| kpi.mean_conf        | number        | Y   | OCR í‰ê·  ì‹ ë¢°ë„    | 0.94                          |
| kpi.table_acc        | number        | Y   | í…Œì´ë¸” ì •í•©ë„       | 0.99                          |
| kpi.entity_match     | number        | N   | í‚¤í•„ë“œ ë§¤ì¹­        | 0.98                          |
| cross_doc.summary    | string        | N   | CIPLâ†”BLâ†”PL ìš”ì•½ | `Qty Î”â‰¤1 OK`                  |
| cross_doc.findings[] | array[obj]    | N   | ë¶ˆì¼ì¹˜ ëª©ë¡        | `{field:"Packages", diff:+3}` |
| zero_flags.active    | boolean       | Y   | ZERO ë°œë™ ì—¬ë¶€    | false                         |
| zero_flags.reasons[] | array[string] | N   | ë°œë™ ì‚¬ìœ          | `["TableAcc<98%"]`            |
| warnings[]           | array[string] | N   | ê²½ê³             | `"Round rule applied"`        |

---

## 3) evidence ë ˆì½”ë“œ

| Field       | Type     | Req | ì„¤ëª…    | ì˜ˆì‹œ                          |
| ----------- | -------- | --- | ----- | --------------------------- |
| type        | string   | Y   | ê·¼ê±° ìœ í˜• | `regulation`,`port_notice`  |
| title       | string   | Y   | ì œëª©    | `Khalifa Port Free Time`    |
| url         | string   | Y   | ë§í¬    | `https://â€¦`                 |
| published   | date     | Y   | ë°œí–‰ì¼   | `2025-07-28`                |
| captured_at | datetime | N   | í™•ë³´ ì‹œê° | `2025-08-10T11:00:00+04:00` |

---

## 4) CERT_CHK ê²°ê³¼

| Field           | Type          | Req  | ì„¤ëª…          | ì˜ˆì‹œ             |          |
| --------------- | ------------- | ---- | ----------- | -------------- | -------- |
| hs_candidates[] | array[string] | N    | HS í›„ë³´       | `["85044090"]` |          |
| moiat.required  | boolean       | N    | MOIAT í•„ìš” ê°€ì„¤ | true           |          |
| moiat.reason    | string        | N    | ê·¼ê±° ìš”ì•½       | `Reg. XYZ â€¦`   |          |
| fanr.required   | boolean       | N    | FANR í•„ìš” ê°€ì„¤  | false          |          |
| imdg.class      | string        | null | N           | IMDG í´ë˜ìŠ¤       | `3`      |
| imdg.un_no      | string        | null | N           | UN ë²ˆí˜¸          | `UN1202` |
| notes           | string        | N    | ë¹„ê³           | `COO ì¶”ê°€ ê¶Œê³ `    |          |

---

## 5) HS_RISK

| Field      | Type          | Req | ì„¤ëª…          | ì˜ˆì‹œ                        |
| ---------- | ------------- | --- | ----------- | ------------------------- |
| codes[]    | array[string] | Y   | í›„ë³´ HS ì½”ë“œ â‰¤3 | `["85044090","85049090"]` |
| confidence | number        | Y   | ì¢…í•© ì‹ ë¢°ë„(0â€“1) | 0.86                      |
| reasoning  | string        | N   | ê·¼ê±° ìš”ì•½       | `Trafo components â€¦`      |

---

## 6) DEMDET_FORECAST v2.0

| Field                      | Type    | Req | ì„¤ëª…             | ì˜ˆì‹œ               |
| -------------------------- | ------- | --- | -------------- | ---------------- |
| eta.value                  | date    | Y   | ETA            | `2025-11-04`     |
| eta.source                 | string  | N   | ì¶œì²˜             | `carrier notice` |
| eta.confidence             | number  | N   | ì‹ ë¢°ë„            | 0.80             |
| port_profile.discharge     | string  | Y   | ì–‘í•˜ í¬íŠ¸          | `Khalifa`        |
| port_profile.free_time.dem | integer | Y   | DEM ì¼ìˆ˜         | 5                |
| port_profile.free_time.det | integer | Y   | DET ì¼ìˆ˜         | 10               |
| expiry.dem                 | date    | N   | DEM ë§Œë£Œ         | `2025-11-09`     |
| expiry.det                 | date    | N   | DET ë§Œë£Œ         | `2025-11-14`     |
| risk_level                 | string  | Y   | `LOW/MED/HIGH` | `MED`            |
| cost_hint                  | number  | N   | ì˜ˆìƒë¹„ìš©(AED)      | 3200.00          |

---

## 7) COST_GUARD_RESULT (í‘œ + ìš”ì•½)

| Field                | Type    | Req | ì„¤ëª…                        | ì˜ˆì‹œ                          |
| -------------------- | ------- | --- | ------------------------- | --------------------------- |
| item                 | string  | Y   | í•­ëª©ëª…/ì½”ë“œ                    | `802.3A Labour`             |
| draft_rate           | number  | Y   | ì²­êµ¬ ë‹¨ê°€                     | 45.00                       |
| std_rate             | number  | Y   | ê¸°ì¤€ ë‹¨ê°€                     | 40.00                       |
| delta_pct            | number  | Y   | ì´ˆê³¼ìœ¨(%)                    | 12.50                       |
| risk_tier            | string  | Y   | `PASS/WARN/HIGH/CRITICAL` | `HIGH`                      |
| remarks              | string  | N   | ê·¼ê±°/ì°¸ì¡°                     | `_sheet:"Sheet1", _line:42` |
| pass_fail            | string  | Y   | ìµœì¢…                        | `FAIL`                      |
| summary.mean_overage | number  | Y   | í‰ê·  ì´ˆê³¼ìœ¨                    | 6.20                        |
| summary.max_overage  | number  | Y   | ìµœëŒ€ ì´ˆê³¼ìœ¨                    | 18.00                       |
| fx_locked            | boolean | Y   | í™˜ìœ¨ ì ê¸ˆ                     | true                        |

---

## 8) container_cargo_rates (ì°¸ì¡° JSON)

| Field                                      | Type     | Req | ì„¤ëª…          | ì˜ˆì‹œ                          |
| ------------------------------------------ | -------- | --- | ----------- | --------------------------- |
| dataset                                    | string   | Y   | ë°ì´í„°ì…‹ëª…       | `container_cargo_rates`     |
| source_file                                | string   | Y   | ì›ë³¸          | `rates.xlsx`                |
| generated_at                               | datetime | Y   | ìƒì„±ì‹œê°        | `2025-08-19T10:00:00+04:00` |
| currency_policy.base                       | string   | Y   | ê¸°ì¤€í†µí™”        | `USD`                       |
| currency_policy.fixed_fx.USD_AED           | number   | Y   | ê³ ì •í™˜ìœ¨        | 3.6725                      |
| validation_rules.layer1_contract_tolerance | number   | Y   | í—ˆìš©í¸ì°¨        | 0.03                        |
| validation_rules.autofail_threshold        | number   | Y   | AutoFail ì„ê³„ | 0.15                        |
| records[].no                               | integer  | Y   | í–‰ ë²ˆí˜¸        | 1                           |
| records[].cargo_type                       | string   | Y   | í™”ë¬¼ìœ í˜•        | `Container`                 |
| records[].port                             | string   | Y   | í¬íŠ¸          | `Jebel Ali Port`            |
| records[].destination                      | string   | N   | ëª©ì ì§€         | `ADNOC Site`                |
| records[].detail_cargo_type                | string   | N   | ì„¸ë¶€ìœ í˜•        | `General`                   |
| records[].container_type                   | string   | N   | ì»¨í…Œì´ë„ˆí˜•ì‹      | `40HC`                      |
| records[].description                      | string   | Y   | ì„¤ëª…          | `Documentation Charge`      |
| records[].unit                             | string   | Y   | ê³¼ê¸ˆë‹¨ìœ„        | `per B/L`                   |
| records[].rate.amount                      | number   | Y   | ê¸°ì¤€ë‹¨ê°€        | 50.00                       |
| records[].rate.currency                    | string   | Y   | í†µí™”          | `USD`                       |
| records[].rate.unit                        | string   | Y   | ë‹¨ìœ„          | `per B/L`                   |
| records[].rate.tolerance                   | number   | Y   | í¸ì°¨          | 0.03                        |
| records[]['_sheet']                        | string   | N   | ì›ì‹œ ì‹œíŠ¸       | `Sheet1`                    |
| records[]['_line_no']                      | integer  | N   | ì›ì‹œ í–‰        | 1                           |

---

## 9) bulk_cargo_rates (ì°¸ì¡° JSON)

| Field                                         | Type    | Req | ì„¤ëª…             | ì˜ˆì‹œ                       |
| --------------------------------------------- | ------- | --- | -------------- | ------------------------ |
| dataset / source_file / generated_at          | â€”       | Y   | ìƒë™             | â€”                        |
| currency_policy / validation_rules            | â€”       | Y   | ìƒë™             | â€”                        |
| records[].no.                                 | integer | Y   | ë²ˆí˜¸(ì›ë³¸ í‘œê¸° í¬í•¨ ì ) | 1                        |
| records[].cargo_type                          | string  | Y   | `Bulk`         |                          |
| records[].port                                | string  | Y   | í¬íŠ¸             | `Jebel Ali Port`         |
| records[].destination                         | string  | N   | ëª©ì ì§€            | `AGI`                    |
| records[].detail_cargo_type                   | string  | N   | ì„¸ë¶€ìœ í˜•           | `Bagged`                 |
| records[].description                         | string  | Y   | ì„¤ëª…             | `Bagged cargo (code 14)` |
| records[].unit                                | string  | Y   | ë‹¨ìœ„             | `MT`                     |
| records[].min_metric_ton                      | number  | N   | í•˜í•œí†¤            | 0.00                     |
| records[].max_metric_ton                      | number  | N   | ìƒí•œí†¤            | 10000.00                 |
| records[].length(meter)                       | number  | N   | ê¸¸ì´             | 12.00                    |
| records[].width(meter)                        | number  | N   | í­              | 2.50                     |
| records[].height(meter)                       | number  | N   | ë†’ì´             | 2.90                     |
| records[].rate.amount/currency/unit/tolerance | â€”       | Y   | ë‹¨ê°€Â·ë‹¨ìœ„Â·í—ˆìš©í¸ì°¨     | â€”                        |
| records[]['_sheet'] / ['_line_no']            | â€”       | N   | ì›ë³¸ ì¶”ì           | â€”                        |

---

## 10) air_cargo_rates (ì°¸ì¡° JSON)

| Field                              | Type    | Req | ì„¤ëª…              | ì˜ˆì‹œ               |
| ---------------------------------- | ------- | --- | --------------- | ---------------- |
| ìƒë‹¨ ë©”íƒ€                              | â€”       | Y   | containerì™€ ë™ì¼   | â€”                |
| records[].no                       | integer | Y   | ë²ˆí˜¸              | 1                |
| records[].cargo_type               | string  | Y   | `Air`           |                  |
| records[].port                     | string  | Y   | `Dubai Airport` |                  |
| records[].destination              | string  | N   | ëª©ì ì§€             | `AUH`            |
| records[].detail_cargo_type        | string  | N   | ì„¸ë¶€              | `General`        |
| records[].description              | string  | Y   | ì„¤ëª…              | `AWB Processing` |
| records[].unit                     | string  | Y   | ë‹¨ìœ„              | `per AWB`        |
| records[].rate.*                   | â€”       | Y   | ê¸°ì¤€ ë‹¨ê°€ ê·œê²©        | â€”                |
| records[]['_sheet'] / ['_line_no'] | â€”       | N   | ì›ë³¸ ì¶”ì            | â€”                |

---

## 11) inland_trucking_reference_rates_clean (ì°¸ì¡° JSON)

| Field                                    | Type   | Req | ì„¤ëª…          | ì˜ˆì‹œ          |
| ---------------------------------------- | ------ | --- | ----------- | ----------- |
| dataset / generated_at                   | â€”      | Y   | ë©”íƒ€          | â€”           |
| currency_policy.base                     | string | Y   | ê¸°ì¤€í†µí™”        | `USD`       |
| validation_rules.*                       | â€”      | Y   | í¸ì°¨/Autofail | 0.03 / 0.15 |
| records[].category                       | string | Y   | ì°¨ëŸ‰/ì¹´í…Œê³ ë¦¬     | `FLATBED`   |
| records[].port                           | string | Y   | ì¶œë°œ/ê¸°ì¤€ í¬íŠ¸    | `Khalifa`   |
| records[].destination                    | string | Y   | ëª©ì ì§€/ë ˆì¸      | `AGI`       |
| records[].unit                           | string | Y   | ê³¼ê¸ˆë‹¨ìœ„        | `per truck` |
| records[].charge_description             | string | Y   | ì„¤ëª…          | `Linehaul`  |
| records[].rate.amount/currency/tolerance | â€”      | Y   | ë‹¨ê°€Â·í—ˆìš©í¸ì°¨     | â€”           |
| records[].flag                           | string | N   | ë©”ëª¨/íƒœê·¸       | `HAZMAT`    |

---

## 12) domestic_reference.json (ë²ˆë“¤)

| Field       | Type    | Req | ì„¤ëª…         | ì˜ˆì‹œ                      |
| ----------- | ------- | --- | ---------- | ----------------------- |
| version     | string  | Y   | ìŠ¤í‚¤ë§ˆ/ë°ì´í„° ë²„ì „ | `v1.0`                  |
| built_from  | string  | Y   | ë¹Œë“œ ì†ŒìŠ¤      | `rates.xlsx`            |
| lane_rows   | integer | Y   | ë ˆì¸ ê±´ìˆ˜      | 124                     |
| region_rows | integer | Y   | ì§€ì—­ ê±´ìˆ˜      | 18                      |
| min_fare    | object  | Y   | ì°¨ëŸ‰ë³„ ìµœì €ìš”ê¸ˆ   | `{FLATBED:200.00,â€¦}`    |
| adjusters   | object  | Y   | ê°€ì‚°ê³„ìˆ˜ dict  | `{FLATBED_HAZMAT:1.15}` |

---

## 13) ref_adjusters.json

| Field | Type   | Req | ì„¤ëª…       | ì˜ˆì‹œ                    |
| ----- | ------ | --- | -------- | --------------------- |
| <KEY> | number | Y   | ì¡°ì •ê³„ìˆ˜(ë°°ìœ¨) | `FLATBED_HAZMAT:1.15` |

> KEY ë„¤ì´ë° ê·œì¹™: `{VEHICLE}_{TAG}` (ì˜ˆ: `FLATBED_CICPA`)

---

## 14) ref_min_fare.json

| Field          | Type   | Req | ì„¤ëª…      | ì˜ˆì‹œ     |
| -------------- | ------ | --- | ------- | ------ |
| `3 TON PU`     | number | Y   | ì°¨ëŸ‰ ìµœì†Œìš”ê¸ˆ | 100.00 |
| `7 TON PU`     | number | Y   | ã€ƒ       | 200.00 |
| `FB`/`FLATBED` | number | Y   | ã€ƒ       | 200.00 |
| `LOWBED`       | number | Y   | ã€ƒ       | 614.83 |
| `DEFAULT`      | number | Y   | ê¸°ë³¸ ìµœì €ìš”ê¸ˆ | 200.00 |

---

## 15) ApprovedLaneMap_ENHANCED

| Field                  | Type          | Req  | ì„¤ëª…       | ì˜ˆì‹œ                     |      |      |   |     |   |       |
| ---------------------- | ------------- | ---- | -------- | ---------------------- | ---- | ---- | - | --- | - | ----- |
| metadata.source_file   | string        | Y    | ì›ë³¸       | `ApprovedLaneMap.xlsx` |      |      |   |     |   |       |
| metadata.created_by    | string        | N    | ì‘ì„±ì      | `Ops`                  |      |      |   |     |   |       |
| metadata.sheets        | array[string] | Y    | ì‹œíŠ¸ ëª©ë¡    | `["Sheet1"]`           |      |      |   |     |   |       |
| data.Sheet1[].lane_id  | string        | Y    | ë ˆì¸ ID    | `L036`                 |      |      |   |     |   |       |
| â€¦[].origin             | string        | Y    | ì¶œë°œì§€      | `DSV Mussafah Yard`    |      |      |   |     |   |       |
| â€¦[].destination        | string        | Y    | ëª©ì ì§€      | `MOSB`                 |      |      |   |     |   |       |
| â€¦[].vehicle            | string        | Y    | ì°¨ëŸ‰       | `FLATBED`              |      |      |   |     |   |       |
| â€¦[].unit               | string        | Y    | ê³¼ê¸ˆë‹¨ìœ„     | `per truck`            |      |      |   |     |   |       |
| â€¦[].median_rate_usd    | number        | Y    | ì¤‘ì•™ê°’(USD) | 200.00                 |      |      |   |     |   |       |
| â€¦[].mean_rate_usd      | number        | Y    | í‰ê· (USD)  | 213.11                 |      |      |   |     |   |       |
| â€¦[].std_rate_usd       | number        | N    | í‘œì¤€í¸ì°¨     | 86.50                  |      |      |   |     |   |       |
| â€¦[].median_distance_km | number        | N    | ê±°ë¦¬ ì¤‘ì•™ê°’   | 5.58                   |      |      |   |     |   |       |
| â€¦[].mean_distance_km   | number        | N    | ê±°ë¦¬ í‰ê·     | 3.98                   |      |      |   |     |   |       |
| â€¦[].samples            | number        | N    | í‘œë³¸ ìˆ˜     | 103.00                 |      |      |   |     |   |       |
| â€¦[].notes              | string        | null | N        | ë¹„ê³                      | null |      |   |     |   |       |
| â€¦[].key                | string        | Y    | ë³µí•©í‚¤(í‘œì¤€í™”) | `ORIGIN                |      | DEST |   | VEH |   | UNIT` |

---

## 16) Unified Response JSON v1.2 (ëŒ€í™”/ë¦¬í¬íŠ¸ ë˜í¼)

| Field        | Type          | Req | ì„¤ëª…         | ì˜ˆì‹œ                                          |
| ------------ | ------------- | --- | ---------- | ------------------------------------------- |
| exec_summary | string        | Y   | 3â€“5ì¤„ ìš”ì•½    | `â€¦`                                         |
| visuals[]    | array[obj]    | N   | í‘œ/ë„ì‹       | `{type:"table", title:"â€¦", data:[â€¦]}`       |
| options[]    | array[obj]    | N   | ëŒ€ì•ˆÂ·ë¹„ìš©Â·ë¦¬ìŠ¤í¬  | `{name:"A", cost:1200.00, risk:"LOW"}`      |
| roadmap      | object        | N   | Pâ†’Piâ†’Bâ†’Oâ†’S | `{prepare:{owner:"Ops", eta:"2025-11-10"}}` |
| automation   | object        | N   | RPA/LLM í›…  | `{tg:"@bot", sheets:"â€¦"}`                   |
| qa           | object        | N   | ê²€ì¦Â·ì˜ë¬¸ì      | `{gaps:["â€¦"]}`                              |
| cmdrec       | array[string] | N   | ì¶”ì²œ ëª…ë ¹      | `["/logi-master â€¦"]`                        |
| meta.version | string        | Y   | ë˜í¼ ë²„ì „      | `v1.2`                                      |
| meta.tz      | string        | Y   | íƒ€ì„ì¡´        | `Asia/Dubai`                                |

---

## 17) ZERO_FAILSAFE_LOG

| Field           | Type   | Req | ì„¤ëª…     | ì˜ˆì‹œ                             |
| --------------- | ------ | --- | ------ | ------------------------------ |
| reason          | string | Y   | ì¤‘ë‹¨ ì‚¬ìœ   | `TableAcc 96.40%`              |
| risk            | string | Y   | ì˜í–¥     | `Invoice mismatch`             |
| requested_data  | string | Y   | í•„ìš”ìë£Œ   | `â‰¥300dpi ì¬ìŠ¤ìº”`                  |
| next_action     | string | Y   | í›„ì†ì¡°ì¹˜   | `/ocr_lowres_fix â†’ /ocr_retry` |
| metrics_at_fail | object | N   | ë‹¹ì‹œ KPI | `{mean_conf:0.88}`             |

---

í•„ìš”í•˜ë©´ **CSV ë°”ë¡œ ë¶™ì—¬ë„£ê¸°ìš© ì»¬ëŸ¼ í—¤ë” ì„¸íŠ¸**ë„ ë½‘ì•„ì¤„ê²Œ. ì–´ëŠ ìŠ¤í‚¤ë§ˆë¶€í„° íŒŒì¼í™”(ì—‘ì…€ ì‹œíŠ¸/JSON ìŠ¤í‚¤ë§ˆ)í•˜ë©´ ë ì§€ ì°ì–´ì¤˜.

### A-2) Full Guide ë³¸ë¬¸(ë™ê¸°í™”ë³¸)
#  ChatGPT ê³ ì •ë°€ OCRÂ·êµ¬ì¡°í™” **Full Guide v2.4 â€“ LDG Ready (LinkedÂ·Agent Mode)**

*(2025-08-10 Â· Asia/Dubai Â· LDG v8.2 ì—°ë™ Â· ë³¸ ë¬¸ì„œëŠ” Mini ì§€ì¹¨ì˜ ë³´ì¡° ìë£Œì…ë‹ˆë‹¤)*

## 1) ëª©ì Â·ì ìš© ë²”ìœ„
- ë³¸ ê°€ì´ë“œëŠ” ì—…ë¡œë“œ ë¬¸ì„œ(CIPL, BL, PL, Invoice, COO, AWB/MAWB ë“±)ë¥¼ **ê³ ì •ë°€ OCRâ†’ì •ê·œí™”â†’ê²€ì¦â†’LDG ì—°ë™**í•˜ëŠ” ì „ ê³¼ì •ì„ í‘œì¤€í™”í•œë‹¤.
- **ë‚´ë¶€ ë„êµ¬(web.run, Python)**ë§Œ ì‚¬ìš©í•˜ë©°, ì™¸ë¶€ APIÂ·ë¹„ì¸ê°€ ì €ì¥ì†Œ ì‚¬ìš©ì„ ê¸ˆì§€í•œë‹¤. PIIëŠ” ë§ˆìŠ¤í‚¹í•˜ê³  ëª¨ë“  ì‚°ì¶œë¬¼ì— í•´ì‹œë¥¼ í¬í•¨í•œë‹¤.
- *(ì—…ë¬´ ì í•©í™”)* 2025 ì˜¤í”ˆì†ŒìŠ¤ ì‹¤ë¬´ íë¦„ì„ ë°˜ì˜í•˜ì—¬ **í…ìŠ¤íŠ¸(ë„¤ì´í‹°ë¸Œ)â†’ë ˆì´ì•„ì›ƒâ†’í…Œì´ë¸”â†’OCR(ì„ ë³„)â†’LLM ì •ê·œí™”**ì˜ í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤íƒì„ ê¶Œì¥í•œë‹¤. ê°€ì •: ìœ ë£Œ ë§¤ë‹ˆì§€ë“œ íŒŒì„œëŠ” fallback í•œì •.

## 2) ì›ì¹™(ì¦ê±°Â·ì‹ ë¢°Â·íˆ¬ëª…)
- **ì¦ê±° ìš°ì„ (HallucinationBan)**: ì •ë¶€Â·í•­ë§ŒÂ·ì„¸ê´€ ê³µì‹œë¥¼ ìµœìš°ì„  ì¸ìš©, ëª¨ë“  ì¸ìš©ì€ `evidence[]`ì— *ì œëª©/ê¸°ê´€/ë°œí–‰ì¼/URL* ì €ì¥.
- **íˆ¬ëª…í•œ ê°€ì •**: ë¶ˆí™•ì‹¤Â·ë¶€ì¡± ë°ì´í„°ëŠ” `ê°€ì •:`ìœ¼ë¡œ ëª…ì‹œ í›„ ì‚¬ëŒ ê²€í†  ê²Œì´íŠ¸.
- **ì¬í˜„ì„±**: ìˆ˜ì¹˜ëŠ” ì†Œìˆ˜ì  2ìë¦¬, í…Œì´ë¸”ì€ CSV ì„ë² ë“œ, íŒŒì´í”„ë¼ì¸/íŒŒë¼ë¯¸í„°/ë²„ì „ì€ ë¡œê·¸ì— ê¸°ë¡.

## 3) KPIÂ·í’ˆì§ˆ ê²Œì´íŠ¸
- MeanConf â‰¥ 0.92, TableAcc â‰¥ 98.00%, NumericIntegrity = 1.00, EntityMatch â‰¥ 0.98, HashConsistency = PASS, CrossDocConsistency = PASS.
- **Excel ìƒì„± ëª¨ë“œ**: KPI ë¯¸ë‹¬ ì‹œ **Soft Warning** (ìƒì„± ì°¨ë‹¨ ì—†ìŒ, ê²½ê³ ë§Œ ê¸°ë¡, Human Gate ê¶Œì¥)
- **OCR íŒŒì´í”„ë¼ì¸ ëª¨ë“œ**: ë¯¸ë‹¬ ì‹œ **ZERO** ì „í™˜ (ingest ì°¨ë‹¨, ì¤‘ë‹¨ ë¡œê·¸ ì¶œë ¥, êµì • ë£¨í‹´(`/ocr_lowres_fix`, `/ocr_retry`, `/ocr_align`) ì œì•ˆ)

## 4) íŒŒì´í”„ë¼ì¸ ìƒì„¸(6ë‹¨ê³„)
1. **Pre-Prep**: ì˜¤í†  íšŒì „Â·ë°ìŠ¤í, ì½˜íŠ¸ë¼ìŠ¤íŠ¸/ìƒ¤í”„ë‹, ë…¸ì´ì¦ˆ ì–µì œ, DPI ë³´ì •(ê¶Œì¥ â‰¥300dpi).
2. **Vision OCR**: ë ˆì´ì•„ì›ƒ ë¸”ë¡/ë¼ì¸ ì¸ì‹, ì–¸ì–´ ê°ì§€, confidence ìˆ˜ì§‘, **í˜ì´ì§€ë³„ ë©”íŠ¸ë¦­**(MeanConf) ì¶”ì .
3. **Smart Table Parser 2.1**: ë³‘í•©ì…€ í•´ì œ, ë‹¤ì¤‘ í—¤ë” ì •ê·œí™”, ë‹¨ìœ„/í†µí™” ë¶„ë¦¬, ì„¸ë¡œâ†’ê°€ë¡œ í”¼ë²—, **ë¼ì¸ì•„ì´í…œ ë³µì› + í•©ê³„ì—´ ê°ì§€**.
4. **NLP Refine**: ë‹¨ìœ„ ê·œê²©í™”(kg, mÂ³, EA), ìˆ˜ëŸ‰Â·ë‹¨ê°€Â·í•©ê³„ ì¼ê´€ì„± ê²€ì‚¬, NULL/??/ì¶”ì • í‘œê¸°, í†µí™”/í™˜ìœ¨ íƒœê¹….
5. **Field Tagger**: Shipper/Consignee/BL_No/Invoice_No/Incoterms/Origin/HS/UN_No/IMDG ë“± **í‚¤-ê°’ íƒœê¹… + ìœ ì‚¬ë„(EntityMatch)**.
6. **Payload Builder**: **LDG_PAYLOAD v2.4 ì§ë ¬í™”** + `doc_hash`Â·`pages`Â·íƒ€ì„ìŠ¤íƒ¬í”„Â·Cross-Doc ë§í¬ + **CSV í…Œì´ë¸” ì„ë² ë“œ**.

> *(ì—…ë¬´ìš© ê¶Œì¥ ìŠ¤íƒ/ìš´ì˜ íŒ)*  
> - **Text ë ˆì´ì–´**: pdfplumber  
> - **Layout ì„¸ê·¸ë¨¼íŠ¸**: Docling ë˜ëŠ” Unstructured  
> - **Table êµ¬ì¡°í™”**: Table Transformer(TATR)  
> - **OCR(ì„ ë³„)**: OCRmyPDF(+PaddleOCR) â€” *í…ìŠ¤íŠ¸ ì—†ëŠ” í˜ì´ì§€ë§Œ* ì ìš©  
> - **Fallback(ë‚œì´ë„â†‘)**: Managed íŒŒì„œ(ë¶€ë¶„ ì‚¬ìš©), VLM ë³´ì¡°(ìŠ¤íƒ¬í”„/ë„í˜• ì„¹ì…˜)  
> - í˜ì´ì§€ë³„ `mode={text|layout|table|ocr}` ìë™ ê²°ì • ë¡œê¹…

## 5) ìë™ ê²€ì¦(5ë‹¨ê³„)
A. **1ì°¨**: KPI/ìŠ¤í‚¤ë§ˆ/íƒ€ì…Â·í•„ìˆ˜ í•„ë“œ/NullÂ·í•©ê³„ ê¸°ë³¸ ë¬´ê²°ì„±.  
B. **í‘œí˜„ ë¡œì§**: ì†Œê³„â†”ì´ê³„, í†µí™”Â·í™˜ìœ¨, ë°˜ì˜¬ë¦¼, ìŒìˆ˜/0 ê°’, ë‹¨ìœ„ ë¶ˆì¼ì¹˜ íƒì§€.  
C. **êµì°¨ ê²€ì¦**: OCR Rawâ†”Refined, **CIPLâ†”BLâ†”PL** í‚¤í•„ë“œ ë§¤í•‘ ë° Î” ê³„ì‚°(í—ˆìš©: Qty Â±1, Wt Â±15.00kg, CBM Â±0.02mÂ³).  
D. **ì í•©ë„ ì‚°ì¶œ**: í‘œ ì¼ì¹˜Â·í‚¤í•„ë“œÂ·ìˆ˜ì¹˜Â·ê·œì • ê·¼ê±° ê°€ì¤‘í•©(0â€“100%).  
E. **ìµœì¢… ë³´ê³ **: **LDG_PAYLOAD + LDG_AUDIT**(Warnings, CrossDocCheck, ZERO_Failsafe, HashConsistency).

## 6) LDG_PAYLOAD v2.4 ìŠ¤í‚¤ë§ˆ
```json
A{
  "meta": {
    "source_file": "â€¦",
    "doc_hash": "sha256:â€¦",
    "ocr_version": "v2.4",
    "mean_conf": 0.94,
    "table_acc": 0.99,
    "numeric_integrity": true,
    "pages": 7,
    "created_at": "2025-08-10T12:34:56+04:00"
  },
  "data": {
    "DocType": "B/L + CIPL",
    "BL_No": "â€¦",
    "Invoice_No": "â€¦",
    "Shipper": "â€¦",
    "Consignee": "â€¦",
    "Incoterms": "FOB",
    "Currency": "USD",
    "Packages": 14,
    "Gross_Weight_kg": 18250.00,
    "Net_Weight_kg": 17780.00,
    "CBM": 38.40,
    "HS_Candidate": ["85044090","85049010","85049090"],
    "Origin": "KR",
    "port_profile": {"discharge":"Khalifa","free_time":{"dem":5,"det":10}},
    "eta": {"value":"2025-08-18","source":"carrier notice","confidence":0.80},
    "demdet_profile": {"rule_id":"khalifa:5/10","valid_until":"2025-12-31"},
    "tables": [{"table_id":"bl_items","format":"csv","data":"Header1,Header2\nVal1,Val2"}]
  },
  "evidence": [
    {"type":"regulation","title":"Customs Notice â€¦","url":"https://â€¦","published":"2025-07-28"}
  ],
  "warnings": ["Page 3 ì„¤ëª… ëˆ„ë½ â†’ ?? í‘œì‹œ"]
}
```

## 7) ComplianceÂ·RegTech ìš´ì˜
- **Mini-RAG(24h)**: ì •ë¶€Â·ì„¸ê´€Â·í•­ë§Œ ê³µì‹œë¥¼ 24ì‹œê°„ ìºì‹œ. `/rag view [kw]`ë¡œ ìºì‹œ ì ê²€, í•„ìš” ì‹œ `/system flush cache minirag`.
- **CERT-CHK**: HS/í‚¤ì›Œë“œ ê¸°ë°˜ìœ¼ë¡œ FANR/MOIAT/TRA/MOFAIC ìš”êµ¬ ê°€ëŠ¥ì„± **ê°€ì„¤** ì œì‹œ(ê²°ì • ì•„ë‹˜). ì¸ìš©ì€ `evidence[]` ê¸°ë¡.
- **IMDG/UN**: ìœ„í—˜ë¬¼ í‚¤ì›Œë“œ ê°ì§€ ì‹œ í´ë˜ìŠ¤/UN_No í›„ë³´ íƒœê¹…. ë¯¸í™•ì •ì€ `null` ì²˜ë¦¬ + ì¡°ì¹˜ ì œì•ˆ(ì¸ë³´ì´ìŠ¤ ì •ì •Â·MSDS í™•ë³´).

## 8) DEM/DET Forecast 2.0
- **ì…ë ¥**: ETA ê°’/ì†ŒìŠ¤/ì‹ ë¢°ë„, Port Profile(Free Time), ê³µíœ´ì¼/ì£¼ë§, í˜¼ì¡ ê°€ì¤‘ì¹˜(ê°€ì • ë˜ëŠ” ê³µì‹œ).  
- **ì¶œë ¥**: dem/det ë§Œë£Œì¼, ì”ì—¬ì¼, ìœ„í—˜ë„(LOW/MED/HIGH), ë¹„ìš©ë°œìƒ ì˜ˆìƒ, Gate Out ì¼ì.  
- **ëª…ë ¹**: `/demdet set profile {port}:{dem}d/{det}d [valid:YYYY MM DD]`, `/demdet set eta {cntr#} {YYYY MM DD} [source:"â€¦"]`.

## 9) ë¹„ìš©Â·í™˜ìœ¨ â€” COST-GUARD
- ê¸°ì¤€ë‹¨ê°€ ëŒ€ë¹„ **ì´ˆê³¼ìœ¨**ë¡œ ìœ„í—˜ ë“±ê¸‰. ì›í™”í ë³´ì¡´, í™˜ìœ¨ì€ ë¬¸ì„œ ê¸°ì¤€ ì—†ìœ¼ë©´ `fx_source:"none"`, ìˆ˜ë™ ì…ë ¥ ì‹œ `fx_source:"manual"`ê³¼ ë¡œê·¸.
- **ì¶œë ¥**: PASS/FAIL, ì´ˆê³¼ í•­ëª© í‘œ(í•­ëª©/ìˆ˜ëŸ‰/ë‹¨ê°€/ì´ˆê³¼ìœ¨), ìš”ì•½ í†µê³„(í‰ê· /ì¤‘ì•™/ìµœëŒ€ ì´ˆê³¼), ê·¼ê±° ë§í¬.

## 10) HS-RISK
- HS í›„ë³´ ìµœëŒ€ 3ê°œ + confidence. ë‹¤ì˜ì„±/ë©´ì œÂ·í—ˆê°€ ê°€ëŠ¥ì„± íƒœê¹…, ê·œì • ê·¼ê±° ìˆ˜ì§‘ ìš”ì²­.
- ê²°ë¡  ì „ **ì‚¬ëŒ ê²€í† ** í•„ìˆ˜. ìƒì¶© ì‹œ **ì •ë¶€ ê³µì‹œ ìš°ì„ **.

## 11) Fail-Safe ZERO
- **íŠ¸ë¦¬ê±°**: KPI ë¯¸ë‹¬, í•µì‹¬ ì‹ë³„ì ê²°ì†, Hash ì‹¤íŒ¨, ê·œì • ê·¼ê±° ë¶€ì¬/ìƒì¶©.
- **ì¤‘ë‹¨ ë¡œê·¸**ì—ëŠ” ì‚¬ìœ Â·ìˆ˜ì¹˜Â·ê·¼ê±°Â·ê¶Œê³  ì¡°ì¹˜(`/ocr_lowres_fix`, ì¬ìŠ¤ìº”, ì •ì •ë³¸ ìš”ì²­, ìºì‹œ ì´ˆê¸°í™”)ë¥¼ í¬í•¨.
- ì¬ê°œ: ë³´ì • ì¡°ì¹˜ ì´í–‰ â†’ `/mark_corrected` â†’ `/system flush cache all` â†’ `/ocr_retry`.

## 12) ë³´ê³ ì„œ(7+2 ì„¹ì…˜)
1) Auto Guard Summary Â· **1.5) Risk Assessment**(ë™ì¸Â·ì‹ ë¢°ë„)  
2) Discrepancy Table(Î”Â·í—ˆìš©ì˜¤ì°¨Â·ìƒíƒœ) Â· 3) Compliance Matrix(ìƒíƒœ/ê·¼ê±°/ì¡°ì¹˜)  
4) Auto-Fill: Freight & Insurance Â· 5) Auto Action Hooks  
6) DEM/DET & Gate Out Forecast Â· 7) Evidence & Citations  
8) Weak Spot & Improvements Â· 9) Changelog

## 13) ëª…ë ¹ì…‹
- `/ocr_basic {file} [mode:LDG|LDG+]`, `/ocr_table {file} [--colfix --unitnorm --as=csv]`, `/ocr_techdoc {file}`
- `/ocr_retry {file}`, `/ocr_lowres_fix {file}`, `/ocr_align {cipl} {bl} [pl]`, `/ocr_compare {A} {B} [--tol=0.02]`
- `/ocr_hs_seed {file} [--origin=AE --max=3]`, `/ocr_certchk {payload.json} [--moiat --fanr --imdg]`, `/ocr_costguard {file} {cost_table.csv} [--lock-fx]`
- `/workflow scan email {file} {to}`, `/workflow full_checkup {file} [to]`

## 14) ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] OCR KPI ìˆ˜ì¹˜(2ìë¦¬) ê¸°ë¡(MeanConf, TableAcc, NumericIntegrity, EntityMatch)  
- [ ] Î” ê³„ì‚°Â·í—ˆìš©ì˜¤ì°¨Â·ìƒíƒœ ì´ëª¨ì§€(âœ…/âš ï¸/âŒ/â¸) í‘œì‹œ  
- [ ] evidence[](ì œëª©/ê¸°ê´€/ë°œí–‰ì¼/ë§í¬/í™•ë³´ì‹œê°) ìˆ˜ì§‘Â·ê²€ì¦  
- [ ] DEM/DET í”„ë¡œí•„(í¬íŠ¸Â·dem/det)Â·ETA ì†ŒìŠ¤/ì‹ ë¢°ë„ ê¸°ë¡  
- [ ] COST-GUARD íŒì •(PASS/FAIL)Â·ì´ˆê³¼ í•­ëª© ìš”ì•½  
- [ ] HS-RISK/CERT-CHK ê²°ê³¼ ë° ì‚¬ëŒê²€í†  ì—¬ë¶€  
- [ ] ZERO/ì¤‘ë‹¨ ë¡œê·¸ ì—¬ë¶€ ë° ì¬ê°œ ì ˆì°¨ ìˆ˜í–‰

## 15) ì¤‘ë‹¨ ë¡œê·¸ í…œí”Œë¦¿
```text
[ì¤‘ë‹¨|ZERO] LDG v8.2
ì‚¬ìœ : TableAcc 96.40% + CIPLâ†”BL íŒ¨í‚¤ì§€ Î” +3
ì¡°ì¹˜: ì¬ìŠ¤ìº”(â‰¥300dpi), ì •ì •ë³¸ ì—…ë¡œë“œ, /system flush cache all í›„ ì¬ë¶„ì„
ê·¼ê±°: evidence[0] ë°œí–‰ì¼ ê²½ê³¼(2023-â€¦)
```

## ë¶€ë¡ B) ëª…ë ¹ì–´ ì‹œë‚˜ë¦¬ì˜¤(12)
1) CIPLâ†”BL ì •í•©ì„± ì‹¬ì¸µ ì ê²€  
   - `/switch_mode LATTICE + /logi-master --deep report {cipl.pdf} {bl.pdf}`  
   - ê¸°ëŒ€: Î”í‘œ(íŒ¨í‚¤ì§€/ì¤‘ëŸ‰/CBM), EntityMatch, ZERO ê²Œì´íŠ¸ ë¡œê·¸

2) ìŠ¤ìº” ì¸ë³´ì´ìŠ¤ í…Œì´ë¸” ì¬êµ¬ì„±(+CSV)  
   - `/ocr_table {invoice.pdf} --colfix --unitnorm --as=csv`  
   - ê¸°ëŒ€: TableAcc ì¹´ë“œ, í•©ê³„/ì„¸ê¸ˆ ì¼ê´€ì„± ê²€ì‚¬

3) ë©€í‹°ì„¹ì…˜ ì¸ë³´ì´ìŠ¤ ë¶„í•´(Agency/Safeen/AD Ports)  
   - `/ocr_table {invoice.pdf} --as=csv` â†’ ì„¹ì…˜ë³„ table_id ë¶€ì—¬  
   - ê¸°ëŒ€: ì„¸ë¶€ ì„¹ì…˜ë³„ ì†Œê³„â†’ì´ê³„ ì—°ê²°

4) HS í›„ë³´ ë° ì¸ì¦ ì²´í¬(ì „ê¸°ê¸°ê¸°)  
   - `/logi-master hs-risk {cipl.pdf} --KRsummary`  
   - ê¸°ëŒ€: HS_Candidateâ‰¤3, MOIAT/FANR ê°€ì„¤, ì‚¬ëŒ ê²€í†  í¬ì¸íŠ¸

5) DEM/DET í”„ë¡œí•„ ì„¤ì • + ETA ì£¼ì…  
   - `/demdet set profile Khalifa:5d/10d [valid:2025 12 31]`  
   - `/demdet set eta CNTR1234 2025 08 18 [source:"carrier notice"]`  
   - ê¸°ëŒ€: ë§Œë£Œì¼/ì”ì—¬ì¼/ë¦¬ìŠ¤í¬

6) COST-GUARD ì¸ë³´ì´ìŠ¤ ê°ì‚¬(AED ê³ ì •)  
   - `/switch_mode COST-GUARD + /logi-master invoice-audit {draft.xlsx} --AEDonly`  
   - ê¸°ëŒ€: ì´ˆê³¼ìœ¨ í…Œì´ë¸”, PASS/FAIL, FXë½

7) Packing List ì¬ì •ê·œí™” + ì¼€ì´ìŠ¤ ë§¤í•‘  
   - `/ocr_table {pl.pdf} --as=csv` â†’ ì¼€ì´ìŠ¤/ì¤‘ëŸ‰/ë¶€í”¼ ì •ê·œí™”  
   - ê¸°ëŒ€: BL/PL ì¼€ì´ìŠ¤ ëŒ€ì‚¬, í—ˆìš©ì˜¤ì°¨ Î”

8) WMS ì ì¹˜ ìœ„ì¹˜ ë§¤í•‘ìš© CSV ì¶œë ¥  
   - `/workflow full_checkup {pl.csv} [to]`  
   - ê¸°ëŒ€: ìœ„ì¹˜ì½”ë“œ/ì¼€ì´ìŠ¤/CBM/ì¤‘ëŸ‰ í‘œì¤€í™”

9) Evidence ìºì‹œ ì ê²€Â·ê°±ì‹   
   - `/rag view demdet` â†’ `/system flush cache minirag`  
   - ê¸°ëŒ€: ê³µì‹œ ìµœì‹ í™”, ê·¼ê±° ë§í¬ ê°±ì‹ 

10) ZERO ì¬ê°œ ë£¨í‹´ ìë™ ìˆ˜í–‰  
   - `/mark_corrected` â†’ `/system flush cache all` â†’ `/ocr_retry {file}`  
   - ê¸°ëŒ€: KPI íšŒë³µ í›„ ingest ì¬ê°œ

11) ATLP/BOE ì°¸ì¡°ë²ˆí˜¸ ë§¤í•‘  
   - `/ocr_basic {boe.pdf}` â†’ í‚¤í•„ë“œ ì¶”ì¶œ â†’ LDG_PAYLOAD.data.BOE_No ì£¼ì…  
   - ê¸°ëŒ€: CrossDocConsistency í–¥ìƒ

12) ì£¼ê°„ í’ˆì§ˆ ë¦¬í¬íŠ¸ ìë™ ìƒì„±  
   - `/logi-master report --KRsummary --noheatmap`  
   - ê¸°ëŒ€: KPI ì¹´ë“œ(MeanConf/TableAcc/NumericIntegrity), ê²½í–¥ ë¶„ì„
