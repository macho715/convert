{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://samsung-ct.com/schemas/cipl-input-v2.4.json",
  "title": "CIPL_INPUT Schema v2.4",
  "description": "CIPL Excel generation input schema for Commons Mode (relaxed for GPT extraction flexibility)",
  "type": "object",
  "required": ["commons", "static_parties"],
  "properties": {
    "commons": {
      "type": "object",
      "description": "Common shipping/invoice fields",
      "required": [
        "pol",
        "pod",
        "carrier",
        "sailing_on",
        "invoice_no",
        "invoice_date",
        "hs_code",
        "manufacturer_name",
        "manufacturer_address_1",
        "manufacturer_address_2",
        "item_description",
        "package_no",
        "net_weight_kg",
        "gross_weight_kg",
        "dimension_cbm",
        "item",
        "quantity_pkgs",
        "freight_usd",
        "insurance_usd",
        "total_cif_usd"
      ],
      "properties": {
        "pol": {"type": "string"},
        "pod": {"type": "string"},
        "carrier": {"type": "string"},
        "sailing_on": {"type": "string"},
        "invoice_no": {"type": "string"},
        "invoice_date": {"type": "string"},
        "hs_code": {"type": "string"},
        "manufacturer_name": {"type": "string"},
        "manufacturer_address_1": {"type": "string"},
        "manufacturer_address_2": {"type": "string"},
        "item_description": {"type": "string"},
        "package_no": {"type": "string"},
        "net_weight_kg": {"type": "number", "minimum": 0},
        "gross_weight_kg": {"type": "number", "minimum": 0},
        "dimension_cbm": {"type": "number", "minimum": 0},
        "item": {"type": "string"},
        "quantity_pkgs": {"type": "integer", "minimum": 0},
        "freight_usd": {"type": "number", "minimum": 0},
        "insurance_usd": {"type": "number", "minimum": 0},
        "total_cif_usd": {"type": "number", "minimum": 0},
        "country_of_origin": {"type": "string"},
        "unit_price_usd_per_unit": {"type": "number", "minimum": 0},
        "ci_qty": {"type": "number", "minimum": 0},
        "ci_unit": {"type": "string"},
        "ci_description": {"type": "string"},
        "ci_of_text": {"type": "string"},
        "ci_marks_no": {"type": "integer", "minimum": 0},
        "ci_item_no": {"type": "string"},
        "pl_qty": {"type": "number", "minimum": 0},
        "pl_unit": {"type": "string"},
        "pl_description": {"type": "string"},
        "pl_of_text": {"type": "string"},
        "pl_marks_no": {"type": "integer", "minimum": 0},
        "pl_item_no": {"type": "string"},
        "item_location": {"type": "string"},
        "packing_style": {"type": "string"},
        "dim_l_cm": {"type": "number", "minimum": 0},
        "dim_w_cm": {"type": "number", "minimum": 0},
        "dim_h_cm": {"type": "number", "minimum": 0}
      },
      "additionalProperties": true
    },
    "static_parties": {
      "type": "object",
      "description": "Static party information",
      "required": [
        "shipper_name",
        "shipper_addr1",
        "shipper_addr2",
        "consignee_name1",
        "consignee_name2",
        "consignee_addr1",
        "consignee_addr2",
        "consignee_addr3",
        "notify_name",
        "notify_addr1",
        "notify_addr2",
        "project_no",
        "project_name",
        "po_no",
        "country_of_origin"
      ],
      "properties": {
        "shipper_name": {"type": "string"},
        "shipper_addr1": {"type": "string"},
        "shipper_addr2": {"type": "string"},
        "consignee_name1": {"type": "string"},
        "consignee_name2": {"type": "string"},
        "consignee_addr1": {"type": "string"},
        "consignee_addr2": {"type": "string"},
        "consignee_addr3": {"type": "string"},
        "notify_name": {"type": "string"},
        "notify_addr1": {"type": "string"},
        "notify_addr2": {"type": "string"},
        "project_no": {"type": "string"},
        "project_name": {"type": "string"},
        "po_no": {"type": "string"},
        "country_of_origin": {"type": "string"},
        "pol_country": {"type": "string"},
        "pod_country": {"type": "string"}
      },
      "additionalProperties": true
    },
    "ci_rider_items": {
      "type": "array",
      "description": "CI rider items (optional). If empty, auto-generated from commons.",
      "items": {
        "type": "object",
        "properties": {
          "marks_no": {"type": "integer", "minimum": 0},
          "of_text": {"type": "string"},
          "item_no": {"type": "string"},
          "description": {"type": "string"},
          "hs_code": {"type": "string"},
          "origin": {"type": "string"},
          "qty": {"type": "number", "minimum": 0},
          "unit": {"type": "string"},
          "unit_price": {"type": "number", "minimum": 0},
          "total_price": {"type": "number", "minimum": 0},
          "amount": {"type": "number", "minimum": 0, "description": "Optional alias; ignored by CIPL.py"}
        },
        "additionalProperties": true
      }
    },
    "pl_rider_items": {
      "type": "array",
      "description": "PL rider items (optional). If empty, auto-generated from commons.",
      "items": {
        "type": "object",
        "properties": {
          "marks_no": {"type": "integer", "minimum": 0},
          "of_text": {"type": "string"},
          "item_no": {"type": "string"},
          "item_location": {"type": "string"},
          "packing_style": {"type": "string"},
          "description": {"type": "string"},
          "hs_code": {"type": "string"},
          "qty": {"type": "number", "minimum": 0},
          "unit": {"type": "string"},
          "net_kg": {"type": "number", "minimum": 0},
          "gross_kg": {"type": "number", "minimum": 0},
          "dim_l_cm": {"type": "number", "minimum": 0},
          "dim_w_cm": {"type": "number", "minimum": 0},
          "dim_h_cm": {"type": "number", "minimum": 0},
          "volume_cbm": {"type": "number", "minimum": 0}
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": true
}
